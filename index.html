<!DOCTYPE html>

<html>

<head>
<link rel="stylesheet" href="style.css">
<script src="js.js"></script>
<title>colors game</title>
</head>


<body>
    <section id="section">
        <div id="sec_controll">
            <h1 class="losetext">!باختی ستون!</h1>
            <p class="finalytext"></p>
            <button onclick="" id="btntext">دوباره</button>

        </div>
       
    </section>
<h2 id="Time">زمان باقیمانده :</h2>
<div id="parent">

<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>
<div onclick="" class="item"></div>



</div>
<h3 class="score"> امتیاز :</h3>


<script> 
var timetext = document.getElementById("Time");
var finalltext =document.querySelector(".finalytext");
var btnstart = document.getElementById("btntext");
var sel = document.getElementById("section");
const colors = ["#4895ef","#8d99ae","#ff8fab","#52796f","#3c096c","#52b788","#ffc9b9","#f8961e","#766153","#028090","#a6a2a2","#b388eb","#805b10","#c9184a","#577590","#f7cad0"]
const items = document.querySelectorAll(".item");
var score = document.querySelector(".score");

var kodescore = 0;

var time = 5 ;

color_random();
var mytimer = setInterval(timer,800);


function color_random() {
   
    


let makecolor = colors[Math.floor(Math.random() * colors.length)];
items.forEach(item=> item.style.backgroundColor = makecolor);
let target = Math.floor(Math.random() * items.length);
if (kodescore <= 20) {
    items[target].style.backgroundColor = lightenColor(makecolor,30);
    }else if (kodescore > 20 && kodescore <= 30) {
    items[target].style.backgroundColor = lightenColor(makecolor,20);
}else if (kodescore > 30 && kodescore <= 40) {
    items[target].style.backgroundColor = lightenColor(makecolor,15);
}else if (kodescore > 40 && kodescore <= 50) {
    items[target].style.backgroundColor = lightenColor(makecolor,10);
}else if (kodescore > 50 && kodescore <= 60) {
    items[target].style.backgroundColor = lightenColor(makecolor,5);
}else{

    items[target].style.backgroundColor = lightenColor(makecolor,2);
}



items.forEach((item,number)=>{
if (target=== number) {
    time = 5;
    item.removeEventListener("click",losegame);
    item.addEventListener("click",nextlvl);
}else{
    
    item.removeEventListener("click",nextlvl);
    item.addEventListener("click",losegame);
}

})

}




function lightenColor(color, amount){
return '#' + color.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));

}

function nextlvl() {
   
   kodescore++;
   score.textContent =  "امتیاز :" + kodescore;
   color_random();
}
function losegame() {
    sel.style.visibility = "visible";
    finalltext.textContent = score.textContent;
    

}
   btnstart.addEventListener("click",(e)=>{
sel.style.visibility = "hidden";
time = 5;
kodescore = 0;
score.textContent =  "امتیاز :" + kodescore;

   });
   
function timer() {
    time--;
    timetext.textContent = "زمان باقیمانده :" + time;
    if (time == 0) {
        losegame();
    }
    if (time < 0) {
        time = 5;
    }
    
}


</script>

</body>

</html>

